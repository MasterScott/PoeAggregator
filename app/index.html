<!doctype html>
<html>
	<head>
		<link rel="stylesheet" href="./css/styles.css">
		<link rel="stylesheet" href="./css/modCustomization.css">
	    <!-- https://electronjs.org/docs/tutorial/security#csp-meta-tag -->
	    <meta http-equiv="Content-Security-Policy" content="script-src 'self' 'unsafe-inline';" />
		<title>Trade Aggregator</title>
	</head>
	<body>
		<input type='text' class="local-data hidden" id='watched-items' value='' />
		<div class="all-screen" >
			<div class="control-panel flex-item">
				<div class="control-panel-items" id='control-panel'>
					<span class='button' onclick="showCurrencyRatios()" >Currency Ratios</span>
					<span class='item-filter-controls'>
						<label class='nowrap'>Filter<input type='text' id='filter-box' value='' /></label>		
						<label class='nowrap'>Min Sum<input type='text' id='min-sum-box' value='' /></label>	
						<label class='nowrap'>Min Value<input type='text' id='min-value-box' value='' /></label>
						<label class='nowrap'>
							Open Prefix 
							<select id='open-prefix' onchange="filterItems()">
								<option value='either'>Either</option>
								<option value='yes'>Yes</option>
								<option value='no'>No</option>
							</select>
						</label>
						<label class='nowrap'>
							Open Suffix 
							<select id='open-suffix' onchange="filterItems()">
								<option value='either'>Either</option>
								<option value='yes'>Yes</option>
								<option value='no'>No</option>
							</select>
						</label>
						<label class='nowrap'>
							Crafted 
							<select id='is-crafted' onchange="filterItems()">
								<option value='either'>Either</option>
								<option value='yes'>Yes</option>
								<option value='no'>No</option>
							</select>
						</label>
					</span>	
					<span class='button' onclick="showHide('settings-modal')" >Settings</span>
					<span id="league-wrapper">
						<select class="local-data" id="league" onchange="saveLocalData('league-wrapper')">
						</select>
					</span>
					<span class='nowrap' id='search-wrapper'>
						<input type='text' class="local-data hidden" id='searches' value='[1][WWZbim][Her Mask][1][.1][]' />
						<span class="button" onclick="openSearchesModal();">Searches</span>
						<label>
							<span class="button">Import</span>
							<input type="file" accept=".txt" class="hidden" id='load-searches' />
						</label>
						<label>
							<span class="button" onclick="exportSearches()">Export</span>
						</label>
					</span>
				
					<span class='nowrap'>
						<label class='nowrap'>Open Sockets<input type='text' value='0' id='socket-count' disabled /></label>
						<label class='nowrap'>Queue Size<input type='text' value='0' id='queue-count' disabled /></label>
						<span class='button' onclick="startSockets()" >Start</span>
						<span class='button' onclick="stopSockets()" >Stop</span>
						<span class='button' onclick="clearDisplay()" >Clear</span>
					</span>	
					<span class='button' onclick="showHide('notes-modal');" >Notes</span>
				</div>
			</div>	
			<div class='display-window-wrapper flex-item condensed view-tab' id='display-window'>
			</div>
			<div class='display-window-wrapper flex-item condensed view-tab hidden' id='watched-display-window'>
			</div>
			
			<div class='tab-control-panel'>
				<div class='overlay-control' onclick="setCurrentWindow('display-window');"">Main</div>
				<div class='overlay-control' onclick="setCurrentWindow('watched-display-window');">Watched</div>
			</div>
			
			<div id='scroll-to-top' class='overlay-control' onclick='scrollToTop();'>Top</div>
		</div>
		<div class="hidden">
			<div class='item-display' id='item-template'>
				<div class="searchinfo">
					<span class='template-field' tf='searchinfo'></span>
					<span class='template-field' tf='refresh-button'></span>
					<div class='template-field' tf='search-comment'></div>
					<span class='template-field' tf='search-time'></span>
					<span class='template-field' tf='listing-time'></span>
				</div>
				<span class='template-field search-color' tf='searchcolor'></span>
				
				<div class='us-inline-table'>
					<div class='us-table-row'>
						<div class='us-table-cell'>
							<div class='icon-wrapper'>
								<div class='template-field icon' tf='icon'>		
								</div>
								<span class='stack-text'>																	
									<span class='template-field stack-prop' tf='item.stackSize'></span><span class='template-field stack-prop' tf='item.maxStackSize'><span class='if-present'>/</span><span class='data-target'></span></span>										
								</span>
							</div>
						</div>
						<div class='us-table-cell'>
							<div class='us-table'>
								<div class='us-table-row'>
									<div class='us-table-cell'>
										<span class='item-name-plate'>
											<span class='template-field item-rarity' tf='item.name'>
												<span class='default-text'>(Unidentified)</span>
											</span>
											<span class='template-field item-rarity' tf='item.typeLine'></span>
										</span>
										<span class='template-field ilvl' tf='item.ilvl'>
											<span class='if-present'>( ilvl: </span>
											<span class='data-target'></span>
											<span class='if-present'>)</span>
										</span>
									</div>
								</div>
								<div class='us-table-row'>
									<div class='us-table-cell'>									
										<span class='template-field' tf='item.sockets'></span>
									</div>
								</div>
								<div class='us-table-row'>
									<div class='us-table-cell'>
										<div class='extra-status'>											
											<span class='template-field corrupted' tf='item.corrupted'></span>
											<span class='template-field mirrored' tf='item.mirrored'></span>
											<span class='template-field shaped' tf='item.influences'></span>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
				<div class='all-item-properties'>					
					<div>
						<span class='template-field' 	tf='item.modCount' 		title='Mod Counts'> </span>
						<span class='template-field' tf='requirements.label'></span>
						<span class='template-field' tf='item.requirements.Level'>
							<span class='if-present'>lvl:</span>
							<span class='data-target data-value'></span>
						</span>
						<span class='template-field req-str' tf='item.requirements.Str'>
							<span class='if-present'>Str:</span>
							<span class='data-target data-value'></span>
						</span>
						<span class='template-field req-str' tf='item.requirements.Strength'>
							<span class='if-present'>Str:</span>
							<span class='data-target data-value'></span>
						</span>
						<span class='template-field req-int' tf='item.requirements.Int'>
							<span class='if-present'>Int:</span>
							<span class='data-target data-value'></span>
						</span>
						<span class='template-field req-int' tf='item.requirements.Intelligence'>
							<span class='if-present'>Int:</span>
							<span class='data-target data-value'></span>
						</span>
						<span class='template-field req-dex' tf='item.requirements.Dex'>
							<span class='if-present'>Dex:</span>
							<span class='data-target data-value'></span>
						</span>
						<span class='template-field req-dex' tf='item.requirements.Dexterity'>
							<span class='if-present'>Dex:</span>
							<span class='data-target data-value'></span>
						</span>
						
					</div>
					<div>	
						<div class='template-field prophecy-text' tf='item.prophecyText'></div>		
						<span class='template-field' tf='item.properties.Level'>
							<span class='if-present'>lvl:</span>
							<span class='data-target data-value'></span>
						</span>
						<span class='template-field' tf='item.additionalProperties.Experience'>
							<span class='if-present'>Exp:</span>
							<span class='data-target data-value'></span>
						</span>
						<div class='template-field' tf='item.properties.Quality'>
							<span class='if-present'>Quality:</span>
							<span class='data-target data-value'></span>
						</div>
						<div class='template-field' tf='item.properties.Chance to Block'>
							<span class='if-present'>Chance to Block:</span>
							<span class='data-target data-value'></span>
						</div>
						
						<span class='template-field' tf='item.properties.Map Tier'>
							<span class='if-present'>Map Tier:</span>
							<span class='data-target data-value'></span>
						</span>
						<span class='template-field' tf='item.properties.Item Quantity'>
							<span class='if-present'>Item Quantity:</span>
							<span class='data-target data-value'></span>
						</span>
						<span class='template-field' tf='item.properties.Item Rarity'>
							<span class='if-present'>Item Rarity:</span>
							<span class='data-target data-value'></span>
						</span>
						<span class='template-field' tf='item.properties.Monster Pack Size'>
							<span class='if-present'>Monster Pack Size:</span>
							<span class='data-target data-value'></span>
						</span>
					</div>
	
					<div>
						<span class='template-field' tf='item.extended.dps'>
							<span class='if-present'>Total dps:{</span>
							<span class='data-target data-value'></span>
							<span class='if-present'>}</span>
						</span>
						<span class='template-field' tf='item.extended.pdps'>
							<span class='if-present'>pdps:{</span>
							<span class='data-target data-value'></span>
							<span class='if-present'>}</span>
						</span>
						<span class='template-field' tf='item.extended.edps'>
							<span class='if-present'>edps:{</span>
							<span class='data-target data-value'></span>
							<span class='if-present'>}</span>
						</span>
					</div>
	
					<div>
						<span class='template-field' tf='item.properties.Critical Strike Chance'>
							<span class='if-present'>Critical Strike Chance:</span>
							<span class='data-target data-value'></span>
						</span>
						<span class='template-field' tf='item.properties.Attacks per Second'>
							<span class='if-present'>Attacks per Second:</span>
							<span class='data-target data-value'></span>
						</span>
					</div>
					<div>
						<span class='template-field' tf='item.extended.ar'>
							<span class='if-present'>Armour:</span>
							<span class='data-target data-value'></span>
						</span>
						<span class='template-field' tf='item.extended.ev'>
							<span class='if-present'>Evasion:</span>
							<span class='data-target data-value'></span>
						</span>
						<span class='template-field' tf='item.extended.es'>
							<span class='if-present'>Energy Shield:</span>
							<span class='data-target data-value'></span>
						</span>
					</div>
				</div>	
				<div>
					<div class='v-top item-mods t-left'>
						<div class='template-field enchant-mods' 	tf='item.enchantMods' 	title='Enchant'> </div>
						<div class='template-field implicit-mods' 	tf='item.implicitMods' 	title='Implicit'> </div>
						<div class='template-field fractured-mods' 	tf='item.fracturedMods' title='Fractured'> </div>
						<div class='template-field explicit-mods' 	tf='item.explicitMods' 	title='Explicit'> </div>
						<div class='template-field crafted-mods' 	tf='item.craftedMods' 	title='Crafted'> </div>
						<div class='template-field veiled-mods' 	tf='item.veiledMods' 	title='Veiled'> </div>
					</div>
				</div>
						
				<span class='item-price'>
					<span class='template-field' tf='listing.price.type'>
						<span class='default-text'>Unpriced</span>
						<span class='if-present'></span>
						<span class='data-target'></span>
					</span>
					<span class='template-field bold' tf='listing.price.amount'></span>						
					<span class='template-field bold' tf='listing.price.currency.img'>
						<span class='if-present'>x</span>
						<span class='data-target'></span>
					</span>	
					<span class='template-field bold' tf='listing.price.chaos.equiv'></span>										
				</span>
				<span class='template-field bold item-price' tf='item.total-sum-per-chaos'>				
					<span class='if-present'>(</span>
					<span class='data-target' onclick='orderByValue()'></span>			
					<span class='if-present'>s/c)</span>
				</span>		
				
				<span class='template-field' tf='whisper-button'></span>
				<span class='template-field account-profile' tf='account-profile'></span>
				<span class='template-field account-status' tf='account-status'>
					<span class='data-target'></span>
				</span>
				<span class='template-field' tf='copy-item-button'></span>
				<span class='template-field' tf='watch-item-button'></span>
				<span class='template-field bold' tf='item.total-sum'>	
					<span class='if-present item-price'>Sum: </span>
					<span class='data-target item-price' onclick='orderBySum()'></span>
				</span>	
			</div>
		</div>		
		
		<div class="modal-wrapper">
			<div class="hidden" id="settings-modal">
				<div class="modal-background" onclick="showHide('settings-modal')"></div>
				<div class="modal-content-box">
					<div class="modal-header">Settings</div>
					<div class="modal-body">	
						<div class="us-inline-table t-left">
							<div class="us-table-row">
								<div class="us-table-cell">
									Default Alert Sound
								</div>
								<div class="us-table-cell">
									<label class='nowrap'>
										<select class="local-data search-sounds" id='notification-sound'>
											<option value="" selected></option>
										</select>
									</label>
								</div>
							</div>
							<div class="us-table-row">
								<div class="us-table-cell">
									Font Size
								</div>
								<div class="us-table-cell">
									<input
											type="range" 
											class="local-data" 
											id="font-size"
											min="1" 
											max="100" 
											value="50" 
											onchange="updateFontSize()">
								</div>
							</div>
							<div class="us-table-row">
								<div class="us-table-cell">
							
								</div>
								<div class="us-table-cell">
									<div class='button' onclick="toggleView()" >View</div>
								</div>
							</div>
							<div class="us-table-row">
								<div class="us-table-cell">
									Max Items Displayed
								</div>
								<div class="us-table-cell">
									<input class="local-data" type='text' id='max-items-displayed-box' value='300' onblur="updateMaxItemsDisplayed()" />
								</div>
							</div>
							<div class="us-table-row">
								<div class="us-table-cell">
									poesessionid
								</div>
								<div class="us-table-cell">
									<input class="local-data" type='text' id='poesessionid' value='' onblur="updatePoesessionid()" />
								</div>
							</div>
							<div class="us-table-row">
								<div class="us-table-cell">
									Queue Update Speed (MS)
								</div>
								<div class="us-table-cell">
									<input class="local-data" type='text' id='queue-update-speed' value='700' onblur="updateQueue()" />
								</div>
							</div>
						</div>
					</div>
					<div class="modal-footer">
						<div>
							<div class='button' onclick="saveLocalData();showHide('settings-modal');" >Save Settings</div>
							<div class="button" onclick="showHide('settings-modal')">Close</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		
		<div class="modal-wrapper">
			<div class="hidden" id="notes-modal">
				<div class="modal-background" onclick="showHide('notes-modal')"></div>
				<div class="modal-content-box">
					<div class="modal-header">Notes</div>
					<div class="modal-body">	
						<textarea class="notes local-data"></textarea>
					</div>
					<div class="modal-footer">
						<div>
							<div class="button" onclick="saveLocalData('notes-modal');showHide('notes-modal');">Save</div>
							<div class="button" onclick="showHide('notes-modal')">Close</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<datalist id="search-categories">
		</datalist>
		<div class="hidden" id="search-string-builder">
			<div class="modal-background"></div>
			<div class="modal-content-box">
				<div class="modal-header">
					Modify Searches
					<div class="filter-panel">
						<input
							id="search-filter"
							type="text" 
							value="Filter Searches"
							list="search-categories"
							autocomplete="off"
						/>
						<div class="button" onclick="activateSearches();" title="Activate All Visible Searches">
							+
						</div>
						<div class="button" onclick="deactivateSearches();" title="Deactivate All Visible Searches">
							-
						</div>
					</div>
					
				</div>
				<div id="search-body-content" class="all-searches">
					<div class="us-table" id="all-searches-table">
						<div class="search-header-row us-table-row">
							<div class="us-table-cell">Active</div>
							<div class="us-table-cell">Url</div>
							<div class="us-table-cell">Comment</div>
							<div class="us-table-cell">Sound</div>
							<div class="us-table-cell">Volume</div>
							<div class="us-table-cell">Color</div>
							<div class="us-table-cell">Category</div>
							<div class="us-table-cell">Auto Copy</div>
							<div class="us-table-cell"></div>
						</div>
					</div>
				</div>
				<div class="add-new-search us-table">
					<div class="search-header-row us-table-row">
						<div class="us-table-cell">Active</div>
						<div class="us-table-cell">Url</div>
						<div class="us-table-cell">Comment</div>
						<div class="us-table-cell">Sound</div>
						<div class="us-table-cell">Volume</div>
						<div class="us-table-cell">Color</div>
						<div class="us-table-cell">Category</div>
						<div class="us-table-cell">Auto Copy</div>
						<div class="us-table-cell"></div>
					</div>
					<div class="us-table-row search-row" id="new-search-row">
						<div class="us-table-cell">
							<input checked="checked" class="search-control search-active" type="checkbox" value="0" onclick="checkActives(this)">
						</div>
						<div class="us-table-cell">
							<div class="us-table">
								<div class="us-table-row">								
									<div class="us-table-cell">
										<span class="button" onclick="loadSearchItems(this)">Run</span>			
									</div>
									<div class="us-table-cell">
										<input class="search-control search-url" type="text">
									</div>
									<div class="us-table-cell">
										<span class="button" onclick="openTradeWebsite(this)">Go</span>
									</div>
								</div>
							</div>						
						</div>
						<div class="us-table-cell">
							<input class="search-control search-comment" type="text">
						</div>
						<div class="us-table-cell">
							<div class="us-table">
								<div class="us-table-row">
									<div class="us-table-cell">
										<select class="search-control search-sounds" id="">
											<option></option>											
										</select>
									</div>
									<div class="us-table-cell">
										<div class="button test-sound-button" title="Test Sound" onclick="testSound(this)">?</div>
									</div>
								</div>
							</div>
						</div>
						<div class="us-table-cell">
							<input class="search-control search-volume" type="range" min="10" max="100" value="25">
						</div>
						<div class="us-table-cell">
							<input class="search-control search-color" type="color">
						</div>
						<div class="us-table-cell">
							<input class="search-control search-category" type="text" list="search-categories">
						</div>
						<div class="us-table-cell">
							<input class="search-control search-auto-copy" type="checkbox" value="1">
						</div>
						
						<div class="us-table-cell button-cell">
							<div class="button add-new-button" onclick="addNewSearchRow()">
								Add New
							</div>
						</div>
					</div>
				</div>
				<div class="modal-footer">
					<div>
						<input type="button" class="button" value="Run Actives" onclick="runActiveSearches();">
						<input type="button" class="button" value="Sort Actives" onclick="sortActiveSearches();">
						<input type="button" class="button" value="Sort Categories" onclick="sortSearchesByCategory();">
						<input type="button" class="button" value="Save" onclick="saveSearchString();">
						<input type="button" class="button" value="Cancel" onclick="showHide('search-string-builder')">
					</div>
				</div>
			</div>
		</div>
		
		<div class="modal-wrapper">
			<div class="hidden" id="currency-ratios">
				<div class="modal-background" onclick="hideCurrencyRatios()"></div>
				<div class="modal-content-box">
					<div class="modal-header">Currency Ratios</div>
					<div id="currency-body-modal">
						<label><span>Exalted Orb</span><input id="Exalted Orb" type="text" class="local-data exa ex exalted"></label>
						<label><span>Cartographer's Chisel</span><input id="Cartographer's Chisel" type="text" class="local-data chisel cart"></label>
						<label><span>Orb of Alchemy</span><input id="Orb of Alchemy" type="text" class="local-data alch alchemy"></label>
						<label><span>Orb of Annulment</span><input id="Orb of Annulment" type="text" class="local-data orb-of-annulment"></label>
						<label><span>Regal Orb</span><input id="Regal Orb" type="text" class="local-data regal rega"></label>
						<label><span>Orb of Fusing</span><input id="Orb of Fusing" type="text" class="local-data fuse fus"></label>
						<label><span>Divine Orb</span><input id="Divine Orb" type="text" class="local-data divine div"></label>
						<label><span>Chromatic Orb</span><input id="Chromatic Orb" type="text" class="local-data chrom chrome"></label>
						<label><span>Jeweller's Orb</span><input id="Jeweller's Orb" type="text" class="local-data jew"></label>
						<label><span>Silver Coin</span><input id="Silver Coin" type="text" class="local-data silver"></label>
						<label><span>Blessed Orb</span><input id="Blessed Orb" type="text" class="local-data blesse"></label>
						<label><span>Orb of Chance</span><input id="Orb of Chance" type="text" class="local-data chance chanc"></label>
						<label><span>Orb of Augmentation</span><input id="Orb of Augmentation" type="text" class="local-data aug"></label>
						<label><span>Orb of Alteration</span><input id="Orb of Alteration" type="text" class="local-data alt"></label>
						<label><span>Scroll of Wisdom</span><input id="Scroll of Wisdom" type="text" class="local-data wis"></label>
						<label><span>Mirror of Kalandra</span><input id="Mirror of Kalandra" type="text" class="local-data mir kal"></label>
						<label><span>Vial of Sacrifice</span><input id="Vial of Sacrifice" type="text" class="local-data"></label>
						<label><span>Vial of the Ghost</span><input id="Vial of the Ghost" type="text" class="local-data"></label>
						<label><span>Mirror Shard</span><input id="Mirror Shard" type="text" class="local-data mirror-shard"></label>
						<label><span>Vial of Awakening</span><input id="Vial of Awakening" type="text" class="local-data"></label>
						<label><span>Fractured Fossil</span><input id="Fractured Fossil" type="text" class="local-data"></label>
						<label><span>Faceted Fossil</span><input id="Faceted Fossil" type="text" class="local-data"></label>
						<label><span>Hollow Fossil</span><input id="Hollow Fossil" type="text" class="local-data"></label>
						<label><span>Bloodstained Fossil</span><input id="Bloodstained Fossil" type="text" class="local-data"></label>
						<label><span>Albino Rhoa Feather</span><input id="Albino Rhoa Feather" type="text" class="local-data"></label>
						<label><span>Deafening Essence of Zeal</span><input id="Deafening Essence of Zeal" type="text" class="local-data deafening-essence-of-zeal"></label>
						<label><span>Second Piece of Brutality</span><input id="Second Piece of Brutality" type="text" class="local-data"></label>
						<label><span>Blessing of Chayula</span><input id="Blessing of Chayula" type="text" class="local-data blessing-chayula blessing-of-chayula"></label>
						<label><span>Glyphic Fossil</span><input id="Glyphic Fossil" type="text" class="local-data"></label>
						<label><span>Deafening Essence of Spite</span><input id="Deafening Essence of Spite" type="text" class="local-data deafening-essence-of-spite"></label>
						<label><span>First Piece of Focus</span><input id="First Piece of Focus" type="text" class="local-data"></label>
						<label><span>Sanctified Fossil</span><input id="Sanctified Fossil" type="text" class="local-data"></label>
						<label><span>Ancient Orb</span><input id="Ancient Orb" type="text" class="local-data ancient-orb"></label>
						<label><span>Essence of Horror</span><input id="Essence of Horror" type="text" class="local-data essence-of-horror"></label>
						<label><span>Deafening Essence of Sorrow</span><input id="Deafening Essence of Sorrow" type="text" class="local-data deafening-essence-of-sorrow"></label>
						<label><span>Shrieking Essence of Zeal</span><input id="Shrieking Essence of Zeal" type="text" class="local-data shrieking-essence-of-zeal"></label>
						<label><span>Deafening Essence of Rage</span><input id="Deafening Essence of Rage" type="text" class="local-data deafening-essence-of-rage"></label>
						<label><span>Deafening Essence of Scorn</span><input id="Deafening Essence of Scorn" type="text" class="local-data deafening-essence-of-scorn"></label>
						<label><span>Prime Chaotic Resonator</span><input id="Prime Chaotic Resonator" type="text" class="local-data"></label>
						<label><span>Third Piece of Directions</span><input id="Third Piece of Directions" type="text" class="local-data"></label>
						<label><span>Harbinger's Orb</span><input id="Harbinger's Orb" type="text" class="local-data harbingers-orb"></label>
						<label><span>First Piece of Time</span><input id="First Piece of Time" type="text" class="local-data"></label>
						<label><span>Essence of Insanity</span><input id="Essence of Insanity" type="text" class="local-data essence-of-insanity"></label>
						<label><span>Shrieking Essence of Spite</span><input id="Shrieking Essence of Spite" type="text" class="local-data shrieking-essence-of-spite"></label>
						<label><span>Dense Fossil</span><input id="Dense Fossil" type="text" class="local-data"></label>
						<label><span>First Piece of Storms</span><input id="First Piece of Storms" type="text" class="local-data"></label>
						<label><span>Prime Alchemical Resonator</span><input id="Prime Alchemical Resonator" type="text" class="local-data"></label>
						<label><span>Deafening Essence of Dread</span><input id="Deafening Essence of Dread" type="text" class="local-data deafening-essence-of-dread"></label>
						<label><span>Deafening Essence of Envy</span><input id="Deafening Essence of Envy" type="text" class="local-data deafening-essence-of-envy"></label>
						<label><span>Second Piece of Storms</span><input id="Second Piece of Storms" type="text" class="local-data"></label>
						<label><span>Tangled Fossil</span><input id="Tangled Fossil" type="text" class="local-data"></label>
						<label><span>Screaming Essence of Zeal</span><input id="Screaming Essence of Zeal" type="text" class="local-data screaming-essence-of-zeal"></label>
						<label><span>First Piece of the Arcane</span><input id="First Piece of the Arcane" type="text" class="local-data"></label>
						<label><span>Shuddering Fossil</span><input id="Shuddering Fossil" type="text" class="local-data"></label>
						<label><span>Essence of Delirium</span><input id="Essence of Delirium" type="text" class="local-data essence-of-delirium"></label>
						<label><span>Essence of Hysteria</span><input id="Essence of Hysteria" type="text" class="local-data essence-of-hysteria"></label>
						<label><span>Gilded Fossil</span><input id="Gilded Fossil" type="text" class="local-data"></label>
						<label><span>Shrieking Essence of Rage</span><input id="Shrieking Essence of Rage" type="text" class="local-data shrieking-essence-of-rage"></label>
						<label><span>Enchanted Fossil</span><input id="Enchanted Fossil" type="text" class="local-data"></label>
						<label><span>Third Piece of Storms</span><input id="Third Piece of Storms" type="text" class="local-data"></label>
						<label><span>Deafening Essence of Greed</span><input id="Deafening Essence of Greed" type="text" class="local-data deafening-essence-of-greed"></label>
						<label><span>Deafening Essence of Contempt</span><input id="Deafening Essence of Contempt" type="text" class="local-data deafening-essence-of-contempt"></label>
						<label><span>Deafening Essence of Woe</span><input id="Deafening Essence of Woe" type="text" class="local-data deafening-essence-of-woe"></label>
						<label><span>Exalted Shard</span><input id="Exalted Shard" type="text" class="local-data exalted-shard"></label>
						<label><span>First Piece of Brutality</span><input id="First Piece of Brutality" type="text" class="local-data"></label>
						<label><span>Prismatic Fossil</span><input id="Prismatic Fossil" type="text" class="local-data"></label>
						<label><span>Blessing of Esh</span><input id="Blessing of Esh" type="text" class="local-data blessing-esh blessing-of-esh"></label>
						<label><span>Shrieking Essence of Sorrow</span><input id="Shrieking Essence of Sorrow" type="text" class="local-data shrieking-essence-of-sorrow"></label>
						<label><span>Fourth Piece of Focus</span><input id="Fourth Piece of Focus" type="text" class="local-data"></label>
						<label><span>Third Piece of the Arcane</span><input id="Third Piece of the Arcane" type="text" class="local-data"></label>
						<label><span>Serrated Fossil</span><input id="Serrated Fossil" type="text" class="local-data"></label>
						<label><span>Deafening Essence of Misery</span><input id="Deafening Essence of Misery" type="text" class="local-data deafening-essence-of-misery"></label>
						<label><span>Perfect Fossil</span><input id="Perfect Fossil" type="text" class="local-data"></label>
						<label><span>Pristine Fossil</span><input id="Pristine Fossil" type="text" class="local-data"></label>
						<label><span>Second Piece of Directions</span><input id="Second Piece of Directions" type="text" class="local-data"></label>
						<label><span>Third Piece of Focus</span><input id="Third Piece of Focus" type="text" class="local-data"></label>
						<label><span>First Piece of Directions</span><input id="First Piece of Directions" type="text" class="local-data"></label>
						<label><span>Vial of Consequence</span><input id="Vial of Consequence" type="text" class="local-data"></label>
						<label><span>Deafening Essence of Loathing</span><input id="Deafening Essence of Loathing" type="text" class="local-data deafening-essence-of-loathing"></label>
						<label><span>Blessing of Uul-Netol</span><input id="Blessing of Uul-Netol" type="text" class="local-data blessing-uul-netol blessing-of-uul-netol"></label>
						<label><span>Shrieking Essence of Scorn</span><input id="Shrieking Essence of Scorn" type="text" class="local-data shrieking-essence-of-scorn"></label>
						<label><span>Remnant of Corruption</span><input id="Remnant of Corruption" type="text" class="local-data remnant-of-corruption"></label>
						<label><span>Aetheric Fossil</span><input id="Aetheric Fossil" type="text" class="local-data"></label>
						<label><span>Deafening Essence of Anger</span><input id="Deafening Essence of Anger" type="text" class="local-data deafening-essence-of-anger"></label>
						<label><span>Second Piece of Time</span><input id="Second Piece of Time" type="text" class="local-data"></label>
						<label><span>Shrieking Essence of Dread</span><input id="Shrieking Essence of Dread" type="text" class="local-data shrieking-essence-of-dread"></label>
						<label><span>Second Piece of the Arcane</span><input id="Second Piece of the Arcane" type="text" class="local-data"></label>
						<label><span>Screaming Essence of Spite</span><input id="Screaming Essence of Spite" type="text" class="local-data screaming-essence-of-spite"></label>
						<label><span>Deafening Essence of Fear</span><input id="Deafening Essence of Fear" type="text" class="local-data deafening-essence-of-fear"></label>
						<label><span>Master Cartographer's Sextant</span><input id="Master Cartographer's Sextant" type="text" class="local-data master-sextant"></label>
						<label><span>Shrieking Essence of Envy</span><input id="Shrieking Essence of Envy" type="text" class="local-data shrieking-essence-of-envy"></label>
						<label><span>Shrieking Essence of Greed</span><input id="Shrieking Essence of Greed" type="text" class="local-data shrieking-essence-of-greed"></label>
						<label><span>Deafening Essence of Wrath</span><input id="Deafening Essence of Wrath" type="text" class="local-data deafening-essence-of-wrath"></label>
						<label><span>Stacked Deck</span><input id="Stacked Deck" type="text" class="local-data"></label>
						<label><span>Deafening Essence of Hatred</span><input id="Deafening Essence of Hatred" type="text" class="local-data deafening-essence-of-hatred"></label>
						<label><span>Second Piece of Focus</span><input id="Second Piece of Focus" type="text" class="local-data"></label>
						<label><span>Annulment Shard</span><input id="Annulment Shard" type="text" class="local-data annulment-shard"></label>
						<label><span>Shrieking Essence of Woe</span><input id="Shrieking Essence of Woe" type="text" class="local-data shrieking-essence-of-woe"></label>
						<label><span>Wailing Essence of Zeal</span><input id="Wailing Essence of Zeal" type="text" class="local-data"></label>
						<label><span>Journeyman Cartographer's Sextant</span><input id="Journeyman Cartographer's Sextant" type="text" class="local-data journeyman-sextant"></label>
						<label><span>Third Piece of Brutality</span><input id="Third Piece of Brutality" type="text" class="local-data"></label>
						<label><span>Blessing of Tul</span><input id="Blessing of Tul" type="text" class="local-data blessing-tul blessing-of-tul"></label>
						<label><span>Frigid Fossil</span><input id="Frigid Fossil" type="text" class="local-data"></label>
						<label><span>Potent Chaotic Resonator</span><input id="Potent Chaotic Resonator" type="text" class="local-data"></label>
						<label><span>Metallic Fossil</span><input id="Metallic Fossil" type="text" class="local-data"></label>
						<label><span>Deafening Essence of Suffering</span><input id="Deafening Essence of Suffering" type="text" class="local-data deafening-essence-of-suffering"></label>
						<label><span>Screaming Essence of Rage</span><input id="Screaming Essence of Rage" type="text" class="local-data screaming-essence-of-rage"></label>
						<label><span>Blessing of Xoph</span><input id="Blessing of Xoph" type="text" class="local-data blessing-xoph blessing-of-xoph"></label>
						<label><span>Deafening Essence of Torment</span><input id="Deafening Essence of Torment" type="text" class="local-data deafening-essence-of-torment"></label>
						<label><span>Deafening Essence of Anguish</span><input id="Deafening Essence of Anguish" type="text" class="local-data deafening-essence-of-anguish"></label>
						<label><span>Shrieking Essence of Wrath</span><input id="Shrieking Essence of Wrath" type="text" class="local-data shrieking-essence-of-wrath"></label>
						<label><span>Deafening Essence of Doubt</span><input id="Deafening Essence of Doubt" type="text" class="local-data deafening-essence-of-doubt"></label>
						<label><span>Shrieking Essence of Anger</span><input id="Shrieking Essence of Anger" type="text" class="local-data shrieking-essence-of-anger"></label>
						<label><span>Shrieking Essence of Contempt</span><input id="Shrieking Essence of Contempt" type="text" class="local-data shrieking-essence-of-contempt"></label>
						<label><span>Ancient Shard</span><input id="Ancient Shard" type="text" class="local-data"></label>
						<label><span>Shrieking Essence of Misery</span><input id="Shrieking Essence of Misery" type="text" class="local-data shrieking-essence-of-misery"></label>
						<label><span>Shrieking Essence of Hatred</span><input id="Shrieking Essence of Hatred" type="text" class="local-data shrieking-essence-of-hatred"></label>
						<label><span>Splinter of Chayula</span><input id="Splinter of Chayula" type="text" class="local-data splinter-chayula splinter-of-chayula"></label>
						<label><span>Screaming Essence of Sorrow</span><input id="Screaming Essence of Sorrow" type="text" class="local-data screaming-essence-of-sorrow"></label>
						<label><span>Shrieking Essence of Fear</span><input id="Shrieking Essence of Fear" type="text" class="local-data shrieking-essence-of-fear"></label>
						<label><span>Vaal Orb</span><input id="Vaal Orb" type="text" class="local-data vaal"></label>
						<label><span>Shrieking Essence of Loathing</span><input id="Shrieking Essence of Loathing" type="text" class="local-data shrieking-essence-of-loathing"></label>
						<label><span>Vial of Dominance</span><input id="Vial of Dominance" type="text" class="local-data"></label>
						<label><span>Screaming Essence of Envy</span><input id="Screaming Essence of Envy" type="text" class="local-data screaming-essence-of-envy"></label>
						<label><span>Primitive Chaotic Resonator</span><input id="Primitive Chaotic Resonator" type="text" class="local-data"></label>
						<label><span>Gemcutter's Prism</span><input id="Gemcutter's Prism" type="text" class="local-data gemc gcp"></label>
						<label><span>Shrieking Essence of Torment</span><input id="Shrieking Essence of Torment" type="text" class="local-data shrieking-essence-of-torment"></label>
						<label><span>Bound Fossil</span><input id="Bound Fossil" type="text" class="local-data"></label>
						<label><span>Orb of Scouring</span><input id="Orb of Scouring" type="text" class="local-data scour"></label>
						<label><span>Vial of Transcendence</span><input id="Vial of Transcendence" type="text" class="local-data"></label>
						<label><span>Apprentice Cartographer's Sextant</span><input id="Apprentice Cartographer's Sextant" type="text" class="local-data apprentice-sextant"></label>
						<label><span>Screaming Essence of Dread</span><input id="Screaming Essence of Dread" type="text" class="local-data screaming-essence-of-dread"></label>
						<label><span>Vial of the Ritual</span><input id="Vial of the Ritual" type="text" class="local-data"></label>
						<label><span>Screaming Essence of Greed</span><input id="Screaming Essence of Greed" type="text" class="local-data screaming-essence-of-greed"></label>
						<label><span>Screaming Essence of Scorn</span><input id="Screaming Essence of Scorn" type="text" class="local-data screaming-essence-of-scorn"></label>
						<label><span>Vial of Summoning</span><input id="Vial of Summoning" type="text" class="local-data"></label>
						<label><span>Encrusted Fossil</span><input id="Encrusted Fossil" type="text" class="local-data"></label>
						<label><span>Shrieking Essence of Anguish</span><input id="Shrieking Essence of Anguish" type="text" class="local-data shrieking-essence-of-anguish"></label>
						<label><span>Shrieking Essence of Doubt</span><input id="Shrieking Essence of Doubt" type="text" class="local-data shrieking-essence-of-doubt"></label>
						<label><span>Orb of Horizons</span><input id="Orb of Horizons" type="text" class="local-data orb-of-horizons"></label>
						<label><span>Vial of Fate</span><input id="Vial of Fate" type="text" class="local-data"></label>
						<label><span>Shrieking Essence of Suffering</span><input id="Shrieking Essence of Suffering" type="text" class="local-data shrieking-essence-of-suffering"></label>
						<label><span>Harbinger's Shard</span><input id="Harbinger's Shard" type="text" class="local-data"></label>
						<label><span>Orb of Regret</span><input id="Orb of Regret" type="text" class="local-data regret regr"></label>
						<label><span>Screaming Essence of Woe</span><input id="Screaming Essence of Woe" type="text" class="local-data screaming-essence-of-woe"></label>
						<label><span>Screaming Essence of Wrath</span><input id="Screaming Essence of Wrath" type="text" class="local-data screaming-essence-of-wrath"></label>
						<label><span>Screaming Essence of Anger</span><input id="Screaming Essence of Anger" type="text" class="local-data screaming-essence-of-anger"></label>
						<label><span>Jagged Fossil</span><input id="Jagged Fossil" type="text" class="local-data"></label>
						<label><span>Screaming Essence of Fear</span><input id="Screaming Essence of Fear" type="text" class="local-data screaming-essence-of-fear"></label>
						<label><span>Screaming Essence of Contempt</span><input id="Screaming Essence of Contempt" type="text" class="local-data screaming-essence-of-contempt"></label>
						<label><span>Muttering Essence of Fear</span><input id="Muttering Essence of Fear" type="text" class="local-data"></label>
						<label><span>Screaming Essence of Torment</span><input id="Screaming Essence of Torment" type="text" class="local-data screaming-essence-of-torment"></label>
						<label><span>Wailing Essence of Spite</span><input id="Wailing Essence of Spite" type="text" class="local-data"></label>
						<label><span>Muttering Essence of Woe</span><input id="Muttering Essence of Woe" type="text" class="local-data"></label>
						<label><span>Screaming Essence of Loathing</span><input id="Screaming Essence of Loathing" type="text" class="local-data screaming-essence-of-loathing"></label>
						<label><span>Screaming Essence of Suffering</span><input id="Screaming Essence of Suffering" type="text" class="local-data screaming-essence-of-suffering"></label>
						<label><span>Screaming Essence of Hatred</span><input id="Screaming Essence of Hatred" type="text" class="local-data screaming-essence-of-hatred"></label>
						<label><span>Wailing Essence of Rage</span><input id="Wailing Essence of Rage" type="text" class="local-data"></label>
						<label><span>Potent Alchemical Resonator</span><input id="Potent Alchemical Resonator" type="text" class="local-data"></label>
						<label><span>Whispering Essence of Greed</span><input id="Whispering Essence of Greed" type="text" class="local-data"></label>
						<label><span>Screaming Essence of Misery</span><input id="Screaming Essence of Misery" type="text" class="local-data screaming-essence-of-misery"></label>
						<label><span>Weeping Essence of Sorrow</span><input id="Weeping Essence of Sorrow" type="text" class="local-data"></label>
						<label><span>Wailing Essence of Loathing</span><input id="Wailing Essence of Loathing" type="text" class="local-data"></label>
						<label><span>Wailing Essence of Greed</span><input id="Wailing Essence of Greed" type="text" class="local-data"></label>
						<label><span>Wailing Essence of Fear</span><input id="Wailing Essence of Fear" type="text" class="local-data"></label>
						<label><span>Whispering Essence of Hatred</span><input id="Whispering Essence of Hatred" type="text" class="local-data"></label>
						<label><span>Weeping Essence of Rage</span><input id="Weeping Essence of Rage" type="text" class="local-data"></label>
						<label><span>Wailing Essence of Anger</span><input id="Wailing Essence of Anger" type="text" class="local-data"></label>
						<label><span>Wailing Essence of Doubt</span><input id="Wailing Essence of Doubt" type="text" class="local-data"></label>
						<label><span>Wailing Essence of Sorrow</span><input id="Wailing Essence of Sorrow" type="text" class="local-data"></label>
						<label><span>Wailing Essence of Suffering</span><input id="Wailing Essence of Suffering" type="text" class="local-data"></label>
						<label><span>Weeping Essence of Wrath</span><input id="Weeping Essence of Wrath" type="text" class="local-data"></label>
						<label><span>Aberrant Fossil</span><input id="Aberrant Fossil" type="text" class="local-data"></label>
						<label><span>Scorched Fossil</span><input id="Scorched Fossil" type="text" class="local-data"></label>
						<label><span>Corroded Fossil</span><input id="Corroded Fossil" type="text" class="local-data"></label>
						<label><span>Weeping Essence of Anger</span><input id="Weeping Essence of Anger" type="text" class="local-data"></label>
						<label><span>Screaming Essence of Doubt</span><input id="Screaming Essence of Doubt" type="text" class="local-data screaming-essence-of-doubt"></label>
						<label><span>Powerful Chaotic Resonator</span><input id="Powerful Chaotic Resonator" type="text" class="local-data"></label>
						<label><span>Screaming Essence of Anguish</span><input id="Screaming Essence of Anguish" type="text" class="local-data screaming-essence-of-anguish"></label>
						<label><span>Weeping Essence of Woe</span><input id="Weeping Essence of Woe" type="text" class="local-data"></label>
						<label><span>Weeping Essence of Greed</span><input id="Weeping Essence of Greed" type="text" class="local-data"></label>
						<label><span>Muttering Essence of Greed</span><input id="Muttering Essence of Greed" type="text" class="local-data"></label>
						<label><span>Wailing Essence of Contempt</span><input id="Wailing Essence of Contempt" type="text" class="local-data"></label>
						<label><span>Lucent Fossil</span><input id="Lucent Fossil" type="text" class="local-data"></label>
						<label><span>Weeping Essence of Hatred</span><input id="Weeping Essence of Hatred" type="text" class="local-data"></label>
						<label><span>Weeping Essence of Fear</span><input id="Weeping Essence of Fear" type="text" class="local-data"></label>
						<label><span>Weeping Essence of Suffering</span><input id="Weeping Essence of Suffering" type="text" class="local-data"></label>
						<label><span>Muttering Essence of Hatred</span><input id="Muttering Essence of Hatred" type="text" class="local-data"></label>
						<label><span>Muttering Essence of Sorrow</span><input id="Muttering Essence of Sorrow" type="text" class="local-data"></label>
						<label><span>Muttering Essence of Anger</span><input id="Muttering Essence of Anger" type="text" class="local-data"></label>
						<label><span>Whispering Essence of Woe</span><input id="Whispering Essence of Woe" type="text" class="local-data"></label>
						<label><span>Wailing Essence of Torment</span><input id="Wailing Essence of Torment" type="text" class="local-data"></label>
						<label><span>Weeping Essence of Contempt</span><input id="Weeping Essence of Contempt" type="text" class="local-data"></label>
						<label><span>Wailing Essence of Woe</span><input id="Wailing Essence of Woe" type="text" class="local-data"></label>
						<label><span>Muttering Essence of Torment</span><input id="Muttering Essence of Torment" type="text" class="local-data"></label>
						<label><span>Wailing Essence of Wrath</span><input id="Wailing Essence of Wrath" type="text" class="local-data"></label>
						<label><span>Weeping Essence of Torment</span><input id="Weeping Essence of Torment" type="text" class="local-data"></label>
						<label><span>Wailing Essence of Hatred</span><input id="Wailing Essence of Hatred" type="text" class="local-data"></label>
						<label><span>Whispering Essence of Contempt</span><input id="Whispering Essence of Contempt" type="text" class="local-data"></label>
						<label><span>Muttering Essence of Contempt</span><input id="Muttering Essence of Contempt" type="text" class="local-data"></label>
						<label><span>Wailing Essence of Anguish</span><input id="Wailing Essence of Anguish" type="text" class="local-data"></label>
						<label><span>Weeping Essence of Doubt</span><input id="Weeping Essence of Doubt" type="text" class="local-data"></label>
						<label><span>Splinter of Uul-Netol</span><input id="Splinter of Uul-Netol" type="text" class="local-data splinter-uul-netol splinter-of-uul-netol"></label>
						<label><span>Orb of Binding</span><input id="Orb of Binding" type="text" class="local-data orb-of-binding"></label>
						<label><span>Powerful Alchemical Resonator</span><input id="Powerful Alchemical Resonator" type="text" class="local-data"></label>
						<label><span>Splinter of Xoph</span><input id="Splinter of Xoph" type="text" class="local-data splinter-xoph splinter-of-xoph"></label>
						<label><span>Engineer's Orb</span><input id="Engineer's Orb" type="text" class="local-data engineers-orb"></label>
						<label><span>Splinter of Tul</span><input id="Splinter of Tul" type="text" class="local-data splinter-tul splinter-of-tul"></label>
						<label><span>Primitive Alchemical Resonator</span><input id="Primitive Alchemical Resonator" type="text" class="local-data"></label>
						<label><span>Splinter of Esh</span><input id="Splinter of Esh" type="text" class="local-data splinter-esh splinter-of-esh"></label>
						<label><span>Glassblower's Bauble</span><input id="Glassblower's Bauble" type="text" class="local-data glass bauble"></label>
						<label><span>Perandus Coin</span><input id="Perandus Coin" type="text" class="local-data coin coins perandus"></label>
						<label><span>Blacksmith's Whetstone</span><input id="Blacksmith's Whetstone" type="text" class="local-data blacksmith whetstone"></label>
						<label><span>Orb of Transmutation</span><input id="Orb of Transmutation" type="text" class="local-data tra"></label>
						<label><span>Portal Scroll</span><input id="Portal Scroll" type="text" class="local-data port"></label>
						<label><span>Armourer's Scrap</span><input id="Armourer's Scrap" type="text" class="local-data armour"></label>	
					</div>
					<div class="modal-footer">
						<div>
							<input class="hidden local-data" type="checkbox" value="auto-load" id="auto-load"/><label for="auto-load" class="button">Auto</label>
							<div class="button" onclick="loadCurrency();">Load from PoEWatch</div>
							<div class="button" onclick="saveLocalData('currency-ratios');hideCurrencyRatios();">Save</div>
							<div class="button" onclick="hideCurrencyRatios();">Close</div>
						</div>
					</div>
				</div>
			</div>
		</div>	
		
		
		<script type="text/javascript" src="./js/polyfills.js"></script>
		<script type="text/javascript" src="./js/audio.js"></script>		
		<script type="text/javascript" src="./js/connectionManager.js"></script>
		<script type="text/javascript" src="./js/searchListing.js"></script>
		<script type="text/javascript" src="./js/dView.js"></script>
		<script type="text/javascript" src="./js/itemFetcher.js"></script>
		<script type="text/javascript" src="./js/aggmain.js"></script>
		<script type="text/javascript" src="./js/webSocketWrapper.js"></script>		
		<script type="text/javascript" src="./js/leagueInfo.js"></script>
		<script type="text/javascript" src="./js/dataPersistence.js"></script>	
		<script type="text/javascript" src="./js/currencyConversion.js"></script>	
		<script type="text/javascript" src="./js/trackedStats.js"></script>
		<script type="text/javascript" src="./js/watchedItems.js"></script>
		<script type="text/javascript" src="./js/startup.js"></script>		
	</body>
</html>
